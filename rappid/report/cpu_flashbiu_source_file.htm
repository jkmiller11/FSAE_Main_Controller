<HTML>
<pre>/*<br> *######################################################################<br> *                                RAppIDJDP<br> *           Rapid Application Initialization and Documentation Tool<br> *                         Freescale Semiconductor Inc.<br> *<br> *######################################################################<br> *<br> * Project Name           : fsae_main_controller<br> *<br> * Project File           : fsae_main_controller.rsp<br> *<br> * Revision Number        : 1.0<br> *<br> * Tool Version           : 1.3.1.6<br> *<br> * file                   : flash_init.c<br> *<br> * Target Compiler        : Codewarrior<br> *<br> * Target Part            : MPC5604B<br> *<br> * Part Errata Fixes      : none<br> *<br> * Project Last Save Date : 06-Jun-2013 02:49:54<br> *<br> * Created on Date        : 06-Jun-2013 02:49:57<br> *<br> * Brief Description      : This File contains FlashBIU configuration <br> *<br> ******************************************************************************** <br> *<br> * Detail Description     : This File contains function which configures code<br> *                         flash(Bank0) Register setup, Data Flash(Bank1)<br> *                         Register setup and access control for masters<br> *<br> ******************************************************************************** <br> *<br> *######################################################################<br>*/<br><br> <br> <br>/********************  Dependent Include files here **********************/<br><br>#include "flash_init.h"<br>#include "rappid_ref.h"<br><br><br>/*********************  Initialization Function(s) ************************/<br><br>void flash_init_fnc (void)<br>{<br><br>/* ----------------------------------------------------------- */<br>/*	                  FLASH_BIU setup                          */<br>/* ----------------------------------------------------------- */<br>      while( 0 == CFLASH.MCR.B.DONE  )    <br>     {     <br>     ;     <br>     }     <br>        /* Registers cannot be written until MCR.DONE is high.    */<br><br><br><br>/* ----------------------------------------------------------- */<br>/*                    FLASH_PFAPR Register setup(0xFFFFFFFF)                      */<br>/* ----------------------------------------------------------- */<br><br>      CFLASH.FAPR.R = 0xFFFFFFFF;    <br><br>        /* Master 1 ( Nexus) Prefetch Enable : No prefetching    */<br>        /* Master 0 ( Core) Prefetch Enable : No prefetching    */<br><br>        /* Master 1 ( Nexus) Access Control : Read and Write    */<br>        /* Master 0 ( Core) Access Control : Read and Write    */<br><br><br>/* ----------------------------------------------------------- */<br>/*                    FLASH_PFCR0 Flash Bank0 Register setup(0x18C780ED)                      */<br>/* ----------------------------------------------------------- */<br><br>      CFLASH.PFCR0.R = 0x18C780ED;    <br>        /* Address Pipelining Control : 3 additional hold cycles    */<br><br>        /* Write Wait State Control :- 3 additional wait states    */<br><br>        /* Read Wait State Control :- 3 additional wait states    */<br><br>        /* Data Prefetch Enable :- No Prefetching    */<br><br>        /* Instruction Prefetch Enable :- Prefetching    */<br><br>        /* Prefetch Limit :- Prefetch on miss or hit    */<br><br>        /* Bank0, Port 0 Buffer Enable :- Enabled    */<br><br>        /* Page Configuration - 3 instruction + 1 data    */<br><br><br><br>/* ----------------------------------------------------------- */<br>/*                    FLASH_PFCR1 Flash Bank1 Register setup(0x18C78081)                      */<br>/* ----------------------------------------------------------- */<br><br>      CFLASH.PFCR1.R = 0x18C78081;    <br>        /* Address Pipelining Control : 3 additional hold cycles    */<br><br>        /* Write Wait State Control :- 3 additional wait states    */<br><br>        /* Read Wait State control :- 3 additional wait states    */<br><br>        /* Bank1, Port 0 Buffer Enable :- Enabled    */<br><br><br><br>}<br><br> <br>/*<br> *######################################################################<br> *                           End of File<br> *######################################################################<br>*/<br><br></pre></BODY></HTML>
